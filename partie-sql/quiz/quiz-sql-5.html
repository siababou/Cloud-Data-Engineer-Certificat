<section>
  <h2>üß† Quiz : Optimisation SQL BigQuery</h2>

  <form id="quizForm" style="max-width: 700px; margin: auto;">
    <style>
      .quiz-block {
        margin-bottom: 2rem;
        background-color: #f4f6f8;
        padding: 1rem 1.5rem;
        border-radius: 8px;
        border-left: 5px solid #3498db;
      }
      .quiz-block p {
        font-weight: bold;
        margin-bottom: 0.5rem;
      }
      .quiz-block label {
        display: block;
        margin-bottom: 0.5rem;
        cursor: pointer;
      }
      .btn-submit {
        background-color: #2ecc71;
        color: white;
        font-weight: bold;
        padding: 0.6rem 1.2rem;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        font-size: 1rem;
        display: block;
        margin: auto;
      }
      .btn-submit:hover {
        background-color: #27ae60;
      }
      #quizResult {
        text-align: center;
        font-size: 1.2rem;
        margin-top: 2rem;
      }
    </style>

    <div class="quiz-block">
      <p>1. Quelle clause permet de r√©duire le volume de donn√©es analys√©es ?</p>
      <label><input type="radio" name="q1" value="a"> SELECT *</label>
      <label><input type="radio" name="q1" value="b"> LIMIT 1000</label>
      <label><input type="radio" name="q1" value="c"> WHERE event_date BETWEEN '2024-01-01' AND '2024-01-31'</label>
    </div>

    <div class="quiz-block">
      <p>2. Quelle fonction est la plus efficace pour compter les utilisateurs uniques ?</p>
      <label><input type="radio" name="q2" value="a"> COUNT(DISTINCT user_id)</label>
      <label><input type="radio" name="q2" value="b"> APPROX_COUNT_DISTINCT(user_id)</label>
      <label><input type="radio" name="q2" value="c"> COUNT(user_id)</label>
    </div>

    <div class="quiz-block">
      <p>3. Quand faut-il filtrer les donn√©es pour am√©liorer les performances ?</p>
      <label><input type="radio" name="q3" value="a"> Apr√®s la jointure</label>
      <label><input type="radio" name="q3" value="b"> Avant la jointure</label>
      <label><input type="radio" name="q3" value="c"> Pas besoin de filtrer</label>
    </div>

    <div class="quiz-block">
      <p>4. Quelle strat√©gie est la plus adapt√©e pour des donn√©es temporelles ?</p>
      <label><input type="radio" name="q4" value="a"> Utiliser un champ horodat√© sans index</label>
      <label><input type="radio" name="q4" value="b"> Partitionner la table par date</label>
      <label><input type="radio" name="q4" value="c"> Filtrer sur l‚Äôann√©e avec EXTRACT</label>
    </div>

    <div class="quiz-block">
      <p>5. Quelle approche est la plus performante ?</p>
      <label><input type="radio" name="q5" value="a"> Jointure de deux tables de 1 To sans filtre</label>
      <label><input type="radio" name="q5" value="b"> Requ√™te SELECT * sur une table non partitionn√©e</label>
      <label><input type="radio" name="q5" value="c"> Filtrer les sources avant jointure et limiter les colonnes</label>
    </div>

    <div class="quiz-block">
      <p>6. Quelle option permet de stocker une logique r√©utilisable et performante ?</p>
      <label><input type="radio" name="q6" value="a"> Sous-requ√™te imbriqu√©e</label>
      <label><input type="radio" name="q6" value="b"> Vue non mat√©rialis√©e</label>
      <label><input type="radio" name="q6" value="c"> Vue mat√©rialis√©e</label>
    </div>

    <div class="quiz-block">
      <p>7. Quelle instruction BigQuery donne des d√©tails sur l‚Äôex√©cution d'une requ√™te ?</p>
      <label><input type="radio" name="q7" value="a"> DEBUG</label>
      <label><input type="radio" name="q7" value="b"> EXPLAIN</label>
      <label><input type="radio" name="q7" value="c"> PROFILE</label>
    </div>

    <div class="quiz-block">
      <p>8. Quelle m√©thode permet de pr√©-traiter un sous-ensemble dans une requ√™te complexe ?</p>
      <label><input type="radio" name="q8" value="a"> WITH (CTE)</label>
      <label><input type="radio" name="q8" value="b"> SELECT *</label>
      <label><input type="radio" name="q8" value="c"> UNION ALL</label>
    </div>

    <button type="button" class="btn-submit" onclick="checkQuiz()">Soumettre mes r√©ponses</button>
  </form>

  <div id="quizResult"></div>

  <script>
    function checkQuiz() {
      const answers = {
        q1: "c",
        q2: "b",
        q3: "b",
        q4: "b",
        q5: "c",
        q6: "c",
        q7: "b",
        q8: "a"
      };

      let score = 0;
      let total = Object.keys(answers).length;

      for (let key in answers) {
        const selected = document.querySelector(`input[name="${key}"]:checked`);
        if (selected && selected.value === answers[key]) {
          score++;
        }
      }

      const result = document.getElementById("quizResult");
      result.innerHTML = `üéØ Score : <strong>${score}/${total}</strong><br>${score === total ? "Parfait, vous ma√Ætrisez l‚Äôoptimisation ! üéâ" : score >= 5 ? "Tr√®s bien ! Continuez comme √ßa üí™" : "R√©visez encore un peu üìò"}`;
      result.style.color = score === total ? "green" : score >= 5 ? "#2980b9" : "crimson";
    }
  </script>
</section>
